<h2>Ctype</h2>
<p>
    Call a compiled C++ code from python using ctypes
</p>
<h4>C++ code</h4>
<pre>
    <code>
#include &ltiostream&gt
using namespace std;

class Foo{
    public:
        double bar(){
            return 9.999;
        }
        int baradd(int num_numbers) {
            return num_numbers*2;
        }
        int barsum(int num_numbers, int *numbers) {
            int sum = 0;
            for (int i = 0; i < num_numbers; i++) {
                sum += numbers[i];
            }
            return sum;
        }
};
extern "C" {
    Foo* Foo_new(){ return new Foo(); }
    double Foo_bar(Foo* foo){ 
        return foo->bar(); 
    }
    int Foo_baradd(Foo* foo, int num_numbers){ 
        return foo->baradd(num_numbers); 
    }
    int Foo_barsum(Foo* foo, int num_numbers, int *numbers){ 
        return foo->barsum(num_numbers,numbers); 
    }
}
    </code>
</pre>
<h4>Python code</h4> 
<pre>
    <code>
from ctypes import cdll,c_double,c_int,POINTER
lib = cdll.LoadLibrary('./libfoo.so')
lib.Foo_bar.restype = c_double
lib.Foo_baradd.restype = c_int
lib.Foo_baradd.argtype = c_int
lib.Foo_barsum.restype = c_int
lib.Foo_barsum.argtypes = [c_int, POINTER(c_int)]

class Foo(object):
    def __init__(self):
        self.obj = lib.Foo_new()

    def bar(self):
        print(lib.Foo_bar(self.obj))
        
    def baradd(self,number):
        result = lib.Foo_baradd(self.obj,c_int(number))
        return int(result)
        
    def barsum(self,numbers):
        num_numbers = len(numbers)
        array_type = c_int * num_numbers
        result = lib.Foo_baradd(self.obj,c_int(num_numbers), array_type(*numbers))
        return int(result)

        
f = Foo()
f.bar()        
print(f.baradd(1))
print(f.barsum([1,2,3,4]))
    </code>
</pre>
